# AI画图助手 - Chrome扩展

一个功能强大的Chrome浏览器插件，选中文字后右键菜单即可调用AI生成图片，支持改图功能。

## 功能特性

- **右键菜单画图** - 选中网页文字，右键点击"AI画图助手"即可生成图片
- **改图功能** - 右键点击图片或选中文字，选择改图服务商编辑图片
- **图片上传服务** - 支持配置图片上传中转服务，解决服务端无法下载图片URL的问题
- **快捷键支持** - 使用 Ctrl+Shift+D 快速画图
- **多API支持** - 支持OpenAI DALL-E、Stability AI、Replicate等各种API
- **历史记录** - 自动保存最近100条画图记录
- **多种保存方式** - 支持复制到剪贴板和下载图片
- **灵活配置** - 可自定义API密钥、模型参数等

## 安装方法

1. 打开Chrome浏览器，访问 chrome://extensions/
2. 开启右上角的"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择本插件的文件夹 chrome-drawer
5. 安装成功后，插件图标会出现在工具栏

## 使用说明

### 基础使用

1. 在网页上选中要生成图片的文字
2. 右键点击选中的文字，选择"AI画图助手" → "根据选中内容生成图片"
3. 等待AI生成图片
4. 生成完成后，可以复制或下载图片

### 改图功能

1. **右键图片改图**：
   - 在网页上右键点击图片
   - 选择"✏️ 用 XXX 改图"
   - 输入改图提示词（如：将背景改为蓝色、添加一只猫等）
   - 点击"开始改图"

2. **上传图片改图**：
   - 右键选中文字，选择改图选项
   - 在弹出的对话框中选择本地图片文件
   - 点击"上传图片"等待上传完成
   - 输入改图提示词并开始改图

### 配置图片上传服务

如果改图时遇到"服务端无法下载图片"的问题，可以配置图片上传服务：

1. 在设置页面找到"图片上传服务"部分
2. 配置上传服务端点（如：`https://api.example.com/upload`）
3. 设置API密钥（可选）
4. 配置响应路径（如：`data.url`）
5. 设置文件字段名（通常是`file`）
6. 点击"测试上传"验证配置

### 快捷键

- Windows/Linux: Ctrl+Shift+D
- Mac: Command+Shift+D

### 配置API

1. 点击插件图标，选择"API设置"
2. 添加AI服务商（支持画图和改图两种类型）
3. 输入您的API密钥和端点
4. 配置自定义参数和请求头
5. 点击"保存设置"
6. 点击"测试连接"验证配置

## 文件结构

```
chrome-drawer/
├── manifest.json          # 插件配置
├── background.js         # 后台脚本
├── content.js            # 内容脚本
├── options.html          # API配置页面
├── options.js            # 配置逻辑
├── edit-dialog.html      # 改图对话框页面
├── edit-dialog.js        # 改图对话框逻辑
├── history.html          # 历史记录页面
├── history.js            # 历史记录逻辑
├── popup.html            # 弹窗页面
├── popup.js              # 弹窗逻辑
├── icons/                # 插件图标
├── styles/               # 样式文件
└── lib/                  # 第三方库
```

## 支持的API

### 画图服务
- OpenAI DALL-E (推荐 DALL-E 3)
- Stability AI (Stable Diffusion)
- Replicate (开源模型)
- 其他兼容的API服务

### 改图服务
- OpenAI DALL-E Edit
- Stability AI Image-to-Image
- 自定义改图API
- 支持异步轮询模式

### 图片上传服务
- 通用文件上传API
- 图床服务
- 云存储服务
- 自建上传服务

## 注意事项

1. 需要有效的API密钥
2. 使用AI服务可能产生费用
3. 部分API可能需要代理
4. 建议先测试API连接
5. 改图功能需要配置支持图片编辑的API
6. 图片上传服务需要支持跨域请求（CORS）

## 更新日志

### v2.0.0
- ✨ 新增改图功能，支持编辑现有图片
- 🔧 新增图片上传服务配置，解决服务端下载图片问题
- 🎨 优化用户界面，支持文件选择和上传
- 🐛 修复多项已知问题

### v1.0.0
- 🎉 基础画图功能
- ⚙️ 多API支持
- 📚 历史记录功能

Made with love for AI art enthusiasts

---

**English version available at [README_EN.md](README_EN.md)**
